<h2>Edit Record</h2><a href="http://localhost/codeigniter/index.php/main/list_records/<?php echo $record['record_type']['value'];?>">Back to list</a>

<?php echo validation_errors(); ?><!-- have to use this way because the Helper adds .HTML to the end of the Action URL --><form method="post" action="http://localhost/codeigniter/index.php/main/update_record/<?php echo $record['id']['value']?>">
<?php 	  //echo form_open('main/update_record/' . $record['id']['value']); 	  echo form_hidden('id', $record['id']['value']);?>
<table>    <tbody>        <tr>            <td>ID</td>            <td><?php echo $record['id']['value']; ?></td>        </tr>        <tr>            <td>Record Type</td>            <td><?php echo form_dropdown('record_type', $record_types, $record['record_type']['value']);?></td>        </tr>        <tr>            <td>Date String</td>            <td><?php echo form_input($record['date_string']); ?></td>        </tr>        <tr>            <td>Sort Date</td>            <td><?php echo form_input($record['sort_date']); ?></td>        </tr>        <tr>            <td>Title</td>            <td><?php echo form_input($record['title']); ?></td>        </tr>        <tr>            <td>Author</td>            <td><?php echo form_input($record['author']); ?></td>        </tr>        <tr>            <td>Description</td>            <td><?php echo form_input($record['description']); ?></td>        </tr>        <tr>            <td>Provenance</td>            <td><?php echo form_input($record['provenance']); ?></td>        </tr>        <tr>            <td>Tags</td>            <td><?php echo form_input($record['tags']); ?></td>        </tr>        <tr>            <td>Modify Date</td>            <td><?php echo $record['modify_date']['value']; ?></td>        </tr>        <tr>            <td>Is New?</td>            <td><?php echo form_checkbox($record['is_new']);; ?></td>        </tr>		    </tbody></table>
<h2>Media</h2><?php	$i=0;	$css = 'class="f-small"';	echo form_hidden('media_num', count($record['media'])) . "\n\n";	foreach($record['media'] as $media){		$media_item = array(				'item'		=> array ('name'	=> 'item_' . $i,									  'value' => $media['id']),				'filename'	=> array ('name'	=> 'filename_' . $i,									  'value' => $media['filename'],									  'class' => 'f-small'),				'notes'		=> array ('name'	=> 'notes_' . $i,									  'value' => $media['notes']),				'order'		=> array ('name'	=> 'order_' . $i,									  'value' => $media['order'],									  									  'class' => 'f-tiny')									  		);		echo "<div id=\"media_item_". $i ."\">\n";		echo "<span class=\"row-title\">" . $i . "</span>\n" ;		echo form_hidden($media_item['item']['name'],$media_item['item']['value']);		print (form_input($media_item['filename']) . "\n" );		print (form_dropdown('media_type_'.$i, $media_types, $media['type'],$css). "\n" );		print (form_input($media_item['order']) . "\n" );		print (form_input($media_item['notes']) . "\n" );		echo $media_item['item']['value'];		echo "</div>\n\n";		//echo $media['create_date'];		$i++;	}		$media_newitem = array(		'item'		=> array ('name'	=> 'item_' . $i,							  'value' => -1),		'filename'	=> array ('name'	=> 'filename_' . $i,							  'value' => '',							  'class' => 'f-small'),		'notes'		=> array ('name'	=> 'notes_' . $i,							  'value' => ''),		'order'		=> array ('name'	=> 'order_' . $i,							  'value' => count($record['media'])+1,									  							  'class' => 'f-tiny')									  	);	echo "<h3>New Item:</h3>\n";	echo "<div id=\"media_item_". $i ."\">\n";	echo "<span class=\"row-title\">" . $i . "</span>\n" ;	echo form_hidden($media_newitem['item']['name'],$media_newitem['item']['value']);	print (form_input($media_newitem['filename']) . "\n" );	print (form_dropdown('media_type_'.$i, $media_types, '', $css). "\n" );	print (form_input($media_newitem['order']) . "\n" );	print (form_input($media_newitem['notes']) . "\n" );	echo $media_newitem['item']['value'];	echo "</div>\n\n";	?>	<br />	<br /><?php	$js = 'onclick="location.replace(\'http://localhost/codeigniter/index.php/main/list_records/' . $record['record_type']['value'] . '\');return false;"';	echo form_submit('submit', 'Save Changes');	echo form_button('mybutton', 'Cancel', $js); 	echo form_close(''); ?>